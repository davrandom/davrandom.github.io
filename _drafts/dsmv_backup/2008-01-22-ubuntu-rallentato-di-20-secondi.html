---
layout: post
title: 'Problema: Ubuntu rallentato di 20 secondi - Soluzione: /etc/hosts'
date: '2008-01-22T09:49:00.001+01:00'
author: davide scaini
tags:
- Computer
- Linux
modified_time: '2008-07-09T11:53:52.182+02:00'
thumbnail: http://bp0.blogger.com/_20vectbl-Js/R5Ww5i2rWgI/AAAAAAAAEiI/aMrzSykfjyw/s72-c/screenshot1.png
blogger_id: tag:blogger.com,1999:blog-23341453.post-7851474605449077396
blogger_orig_url: http://dsmv.blogspot.com/2008/01/ubuntu-rallentato-di-20-secondi.html
---

Vi capita che Ubuntu ci metta almeno 20 secondi per fare qualsiasi cosa? anche aprire un terminale? anche aprire la vostra home?<br />allora siete al posto giusto al momento giusto...<br /><br />capita che il NetworkManager riscriva il file<br /><pre>/etc/hosts</pre>dimenticandosi del nome del vostro computer... cosa banale ma necessaria al sistema linux per funzionare adeguatamente. Se controllate nel network manager (interfaccia grafica) vedrete che il nome del vostro pc (nome host)<br /><br /><a href="http://bp0.blogger.com/_20vectbl-Js/R5Ww5i2rWgI/AAAAAAAAEiI/aMrzSykfjyw/s1600-h/screenshot1.png" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5158223450877942274" src="http://bp0.blogger.com/_20vectbl-Js/R5Ww5i2rWgI/AAAAAAAAEiI/aMrzSykfjyw/s320/screenshot1.png" style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer;" /></a><br />(il nome del dominio non è strettamente necessario)<br />è correttamente inserito eppure se da terminale date:<br /><pre>cat /etc/hosts</pre>vedrete una cosa del tipo<br />PRIMA VERSIONE:<br /><pre>127.0.0.1 localhost<br />127.0.1.1<br /><br /># The following lines are desirable for IPv6 capable hosts<br />::1 ip6-localhost ip6-loopback<br />fe00::0 ip6-localnet<br />ff00::0 ip6-mcastprefix<br />ff02::1 ip6-allnodes<br />ff02::2 ip6-allrouters<br />ff02::3 ip6-allhosts<br /></pre>anziché<br />SECONDA VERSIONE:<br /><pre>127.0.0.1 localhost nomehost.nomedominio<br />127.0.1.1 nomehost.nomedominio<br /><br /># The following lines are desirable for IPv6 capable hosts<br />::1 ip6-localhost ip6-loopback<br />fe00::0 ip6-localnet<br />ff00::0 ip6-mcastprefix<br />ff02::1 ip6-allnodes<br />ff02::2 ip6-allrouters<br />ff02::3 ip6-allhosts<br /></pre>se siete nella prima condizione allora è meglio che seguiate questa guidina.<br /><br />Ho provveduto a una vesione della guida per quelli che non hanno interesse a capire quello che stanno facendo (probabilmente utenti windows), troverete quanto vi spetta dopo la vostra fotografia in fondo alla parte per le persone intelligenti. (un po' di sano razzismo ci vuole sempre... inutile fare i buonisti con i seguaci di redmond).<br /><br />Questa guida vuole essere una guida per tutti, quindi scusate se userò gedit e non il vostro editor di testo preferito... per quanto mi riguarda fate come vi pare.<br /><br />1 – aprire un terminale<br />2 – digitate<br /><pre>cat /etc/hosts</pre>3 – se il file si presenta senza nome dell'host (vedi prima versione)<br />4 – digitate<br /><pre>sudo gedit /etc/hosts</pre>vi verrà chiesta la vostra password, digitatela senza timore...<br />si aprirà una finestra di gedit dove dovrete eseguire il punto successivo<br />5 – dovete mettere il nome del vostro pc (basta guardare nel terminale il testo prima del rettangolino lampeggiante, io ho elijah@ububook, quindi copierò ububook...) e ottenere un file del tipo:<br /><pre>127.0.0.1 localhost nomehost<br />127.0.1.1 nomehost<br /><br /># The following lines are desirable for IPv6 capable hosts<br />::1 ip6-localhost ip6-loopback<br />fe00::0 ip6-localnet<br />ff00::0 ip6-mcastprefix<br />ff02::1 ip6-allnodes<br />ff02::2 ip6-allrouters<br />ff02::3 ip6-allhosts<br /></pre>(al posto di nomehost io metterò ububook, voi quello che più vi piace; questa è la versione “base” del file)<br />6 – salvate e chiudete gedit<br />7- dobbiamo rendere permanenti queste modifiche. questo si può fare in molti modi, io preferisco farlo così perchè rientra in un mio certo modo di vedere la mia installazione linux... io salvo tutti i files di configurazione in una unica cartella nella mia Home, così nel caso di piallature/cazzeggi eccessivi del/nel mio sistema posso mettere tutto a posto come prima dell'intervento.<br />Brevemente, il mio modo di procedere è:<br />8 – mettetevi nella vostra home, per far questo basta digitare su terminale<br /><pre>cd</pre>e dare invio. Ora siete nella home del vostro utente (voi).<br /><br />9 – create una cartella che chiameremo conf_files e la generiamo da root così non potrete cancellarla inavveritamente da utente normale:<br /><pre>sudo mkdir conf_files</pre>10 – copiamo in questa cartella il frutto dei nostri sforzi<br /><pre>sudo cp /etc/hosts conf_files/</pre>11 – ora facciamo sì che questo file venga copiato su quello già esistente ad ogni riavvio del pc, eccessiva precauzione, ma se non volete stare a controllare ogni volta... può risultare conveniente.<br /><pre>sudo gedit /etc/init.d/bootmisc.sh</pre>Vi verrà aperto uno dei files che viene eseguito all'avvio e si occupa di eseguire delle operazioni...<br />NON FATE CAZZATE! NON CANCELLATE RIGHE! SIATE PRUDENTI!<br />da grandi poteri come “sudo” derivano grosse responsabilità e molto spesso molte bestemmie...<br /><br />12 – in questo file in testa a esso, o dopo le righe<br /><pre>#!/bin/sh<br />### BEGIN INIT INFO<br /># Provides:          bootmisc<br /># Required-Start:    $local_fs hostname $remote_fs<br /># Required-Stop:     $local_fs<br /># Default-Start:     S<br /># Default-Stop:<br /># Short-Description: Miscellaneous things to be done during bootup.<br /># Description:<br />### END INIT INFO<br /></pre>che, come potete notare, sono commentate, dovete aggiungere le seguenti righe<br /><pre>### added as a workaround for NetworkManager<br />cp /home/vostronomeutente/conf_files/hosts /etc/<br />### end workaround<br /></pre>avendo la cura di mettere al posto di “vostronomeutente” il vostro nome utente... quello con cui vi loggate per capirci...<br /><br />13 – salvate e chiudete<br />FINE<br /><br /><a href="http://bp3.blogger.com/_20vectbl-Js/R5WxxS2rWhI/AAAAAAAAEiQ/3kLzkV8rWuU/s1600-h/carcerato.gif" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5158224408655649298" src="http://bp3.blogger.com/_20vectbl-Js/R5WxxS2rWhI/AAAAAAAAEiQ/3kLzkV8rWuU/s320/carcerato.gif" style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer;" /></a><br />versione per quelli che non hanno voglia...<br />NON MODIFICATE COSE A CASO... (per esempio se togliete un > all'ultima riga siete abbastanza nella cacchetta...<br />aprite un terminale e incollateci le righe da voi modificate, premete invio o enter, quando richiesto mettete la vostra password.<br /><pre>cd<br />sudo mkdir conf_files<br />sudo echo -e "127.0.0.1 localhost miopc \n127.0.1.1 miopc\n\n# The following lines are desirable for IPv6 capable hosts\n::1 ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\nff02::3 ip6-allhosts" > conf_files/hosts<br />sudo echo -e "### added as a workaround for NetworkManager\ncp /home/`whoami`/conf_files/hosts /etc/\n### end workaround" >> /etc/init.d/bootmisc.sh<br />sudo sh /etc/init.d/bootmisc.sh<br /></pre>ATTENZIONE ALLE VIRGOLETTE!<br />(Avrei potuto fare un scriptino in bash, ma non so se era più difficile... quelli un po' smagati possono tranquillamente farselo copincollando queste righe in un file [e mettendoci alla fine di ogni riga dei punti e virgola] salvandolo come workaround.sh e eseguendolo da terminale semplicemente come<br /><pre>sh workaround.sh</pre><br /><br />ciao bbelli!<br />d<br /><br />Torna a <a href="http://dsmv.blogspot.com/">Ds&amp;Mv Home</a><br /><br />EDIT: Ho anch esegnalato il bug su planet gnome, ma mi dicono che il Network Manager non tocca /etc/hosts, che è possibile che sia una patch di ubuntu... ora io non credo tantissimo a questa versione comunque è quella ufficiale gnome. Se c'è qualcunoc he vuole segnalare il bug su ubuntu lo faccia, io mi son rotto le palle.